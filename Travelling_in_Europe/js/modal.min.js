const modalTriggers=document.querySelectorAll(".js-modalOpen"),bodyBlackout=document.querySelector(".js-modalBlackout"),modalCloseBtn=document.querySelector(".js-modalCloseBtn"),inputEmail=document.querySelector(".js-validateEmail"),inputTel=document.querySelector(".js-validateTel"),form=document.querySelector(".js-form"),sendForm=document.querySelector(".js-sendForm"),success=document.querySelector(".js-success"),clearFormErrors=()=>{Array.prototype.slice.call(document.querySelectorAll(".form-input__error")).forEach(e=>{e.parentNode.removeChild(e)})},closeModal=e=>{e.classList.remove("is--visible"),bodyBlackout.classList.remove("is-blacked-out"),success.classList.remove("modal__success--show"),clearFormErrors()};modalTriggers.forEach(e=>{e.addEventListener("click",o=>{const s=e.dataset.popupTrigger,t=document.querySelector(`[data-popup-modal="${s}"]`);o.preventDefault(),t.classList.add("is--visible"),bodyBlackout.classList.add("is-blacked-out"),bodyBlackout.addEventListener("click",()=>{closeModal(t)}),modalCloseBtn.addEventListener("click",()=>{closeModal(t)}),window.addEventListener("keydown",e=>{27===e.keyCode&&t.classList.contains("is--visible")&&(e.preventDefault(),closeModal(t))})})});const validateInput=(e,o,s)=>{const t="email"===o?/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/:/^\d{10}$/,l=e.value,a=t.test(l);if(!a){const o=document.createElement("div");o.classList.add("form-input__error"),o.innerHTML+=s,e.parentNode.insertBefore(o,e)}return a};sendForm.addEventListener("click",()=>{clearFormErrors(),(validateInput(inputTel,"tel","Данные не верны")||validateInput(inputEmail,"email","Данные не верны"))&&success.classList.add("modal__success--show")});